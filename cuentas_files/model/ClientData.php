<?php//Modelo de los clientes en el sistemaclass ClientData {	public static $tablename = "client";	public function __construct(){		$this->idclient = "";		$this->tipo_empresa = "";		$this->ruc = "";		$this->nombre = "";		$this->contacto = "";		$this->cargo = "";		$this->email = "";		$this->telefono1 = "";		$this->telefono2 = "";		$this->factura = "";		$this->telefonofac1 = "";		$this->telefonofac2 = "";		$this->fechafac = "";		$this->fechaini = "";		$this->fechafin = "";		$this->ini_fac = "";		$this->fin_fac = "";		$this->direccion = "";		$this->observacion = "";		$this->monto = 0;		$this->etapas = "";		$this->hadicional = "";		$this->hnocturna = "";		$this->is_active = "";		$this->created_at = "NOW()";	}	public function add(){		$sql = "INSERT INTO client (idcompany, tipo_empresa, ruc, nombre, contacto, cargo, email, telefono1, telefono2, factura, telefonofac1, telefonofac2, fechafac, fechaini, fechafin, ini_fac, fin_fac, direccion, observacion, monto, etapas, hadicional, hnocturna, is_active, created_at) ";		$sql .= "VALUES (".$_SESSION['id_company'].", \"$this->tipo_empresa\", \"$this->ruc\", \"$this->nombre\", \"$this->contacto\", \"$this->cargo\", \"$this->email\", \"$this->telefono1\", \"$this->telefono2\", \"$this->factura\", \"$this->telefonofac1\", \"$this->telefonofac2\", \"$this->fechafac\", \"$this->fechaini\", \"$this->fechafin\", \"$this->ini_fac\", \"$this->fin_fac\", \"$this->direccion\", \"$this->observacion\", $this->monto, \"$this->etapas\", \"$this->hadicional\", \"$this->hnocturna\", 1, $this->created_at)";		Executor::doit($sql);	}	public static function delById($id){		$sql = "update ".self::$tablename." set is_active = 0 where id=$id";		$valor = Executor::doit($sql);		return $valor;	}	public function del(){		$sql = "delete from ".self::$tablename." where idclient=$this->idclient";		$valor = Executor::doit($sql);		return $valor;	}	public function update(){		$sql = "UPDATE ".self::$tablename." SET  tipo_empresa=\"$this->tipo_empresa\", nombre=\"$this->nombre\", contacto=\"$this->contacto\", cargo=\"$this->cargo\", email=\"$this->email\", telefono1=\"$this->telefono1\", telefono2=\"$this->telefono2\", factura=\"$this->factura\", telefonofac1=\"$this->telefonofac1\", telefonofac2=\"$this->telefonofac2\", fechafac=\"$this->fechafac\", fechaini=\"$this->fechaini\", fechafin=\"$this->fechafin\", ini_fac=\"$this->ini_fac\", fin_fac=\"$this->fin_fac\", direccion=\"$this->direccion\", observacion=\"$this->observacion\", monto=\"$this->monto\", etapas=\"$this->etapas\", hadicional=\"$this->hadicional\", hnocturna=\"$this->hnocturna\", is_active=\"$this->is_active\" WHERE idclient=$this->id";		$valor = Executor::doit($sql); 		return $valor;	}	public static function getByRuc($id){		$sql = "select * from ".self::$tablename." where ruc=\"$id\"";		$query = Executor::doit($sql);		return Model::one($query[0],new ClientData());	}	public static function getById($id){		$sql = "SELECT * FROM ".self::$tablename." WHERE idclient=$id";		$query = Executor::doit($sql);		return Model::one($query[0],new ClientData());	}	public static function getTodos(){		$sql = "SELECT * FROM ".self::$tablename;		$query = Executor::doit($sql);		return Model::many($query[0],new ClientData());	}		public static function getTotal(){		$sql = "SELECT * FROM ".self::$tablename." WHERE is_active = 1";		$query = Executor::doit($sql);		return Model::many($query[0],new ClientData());	}	public static function getAll($tipo, $activo = 1){		$sql = "SELECT * FROM ".self::$tablename." WHERE tipo = $tipo AND is_active = $activo";		$query = Executor::doit($sql);		return Model::many($query[0],new ClientData());	}	public static function getByIdPuestos($id){		$sql = "select A.id, A.codigo, A.descripcion, A.activado, B.descripcion lugar, A.horas, A.horario, A.created_at from puestos A, localidad B WHERE A.idlugar = B.id AND A.idclient=$id";		$query = Executor::doit($sql);		$array = array();		$cnt = 0;		while($r = $query[0]->fetch_array()){			$array[$cnt] = new ClientData();			$array[$cnt]->id = $r['id'];			$array[$cnt]->codigo = $r['codigo'];			$array[$cnt]->descripcion = $r['descripcion'];			$array[$cnt]->activado = $r['activado'];			$array[$cnt]->lugar = $r['lugar'];			$array[$cnt]->horario = $r['horas'].' '.$r['horario'];			$array[$cnt]->created_at = $r['created_at'];			$cnt++;		}		return $array;	}	public static function getLike($q){		$sql = "select * from ".self::$tablename." where name like '%$q%'";		$query = Executor::doit($sql);		$array = array();		$cnt = 0;		while($r = $query[0]->fetch_array()){			$array[$cnt] = new CategoryData();			$array[$cnt]->id = $r['id'];			$array[$cnt]->name = $r['name'];			$array[$cnt]->created_at = $r['created_at'];			$cnt++;		}		return $array;	}			//Modelo nuevo	public static function getDetalle($id){		$sql = "SELECT * FROM clientd WHERE idclient = $id AND is_active = 1";		$query = Executor::doit($sql);		return Model::many($query[0],new ClientData());	}}